N1_LB		EQU	31H
N1_HB		EQU	30H
N2_LB		EQU	33H
N2_HB		EQU	32H
MUL_RES_HB	EQU	40H

		ORG	0000H
		SJMP	MAIN

		ORG	000BH
		LJMP	DO_FOO

		ORG	0030H
MAIN:		MOV	IE, #10000010B
		MOV	R2, #02D
		MOV	R3, #00H
		ACALL	DELAY
HALT:		SJMP	HALT

DELAY:		MOV	TMOD, #00000001B
		MOV	TL0, #0FFH
		MOV	TH0, #0FFH

		MOV	N1_LB, R2
		MOV	N1_HB, R3
		MOV	N2_LB, #0E8H
		MOV	N2_HB, #03H
		ACALL	TWO_B_MUL

		MOV	A, TL0
		CLR	C
		SUBB	A, (MUL_RES_HB + 3)
		MOV	TL0, A
		MOV	A, TH0
		SUBB	A, (MUL_RES_HB + 2)
		MOV	TH0, A

START_TIMER:	SETB	TR0
		RET

TWO_B_MUL:	MOV	R0, #38H

		MOV	A, N1_LB
		MOV	B, N2_LB
		MUL	AB
		MOV	@R0, B
		INC	R0
		MOV	@R0, A
		INC	R0

		MOV	A, N1_HB
		MOV	B, N2_LB
		MUL	AB
		MOV	@R0, B
		INC	R0
		MOV	@R0, A
		INC	R0

		MOV	A, N1_LB
		MOV	B, N2_HB
		MUL	AB
		MOV	@R0, B
		INC	R0
		MOV	@R0, A
		INC	R0

		MOV	A, N1_HB
		MOV	B, N2_HB
		MUL	AB
		MOV	@R0, B
		INC	R0
		MOV	@R0, A
		INC	R0

		MOV	(MUL_RES_HB + 3), 39H

		MOV	A, 38H
		ADD	A, 3BH
		ADDC	A, 3DH
		MOV	(MUL_RES_HB + 2), A

		MOV	A, 3AH
		ADDC	A, 3CH
		ADDC	A, 3FH
		MOV	(MUL_RES_HB + 1), A

		MOV	A, 3EH
		ADDC	A, #00H
		MOV	MUL_RES_HB, A
		RET

DO_FOO:		CLR	TR0
		CPL	P1.0
		MOV	R2, #02D
		MOV	R3, #00H
		ACALL	DELAY
		RETI

		END